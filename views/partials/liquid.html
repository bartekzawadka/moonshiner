<div>
    <div layout="column" ng-cloak class="md-inline-form">
        <div>
            <form name="liquidForm">
                <section>
                    <div class="label">General</div>
                    <input type="hidden" ng-model="liquid.id">
                    <md-input-container class="md-block">
                        <label>Name</label>
                        <input required name="lName" ng-model="liquid.name">
                        <div ng-messages="liquidForm.lName.$error">
                            <div ng-message="required">This is required.</div>
                        </div>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Moonshining description</label>
                        <textarea ng-model="liquid.description" md-maxlength="2000" rows="5" md-select-on-focus>

                            </textarea>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>PG [%]</label>
                        <input required ng-model="liquid.pg_vg" name="lPg" ng-pattern="/^[0-9]{1,2}$/">
                        <div ng-messages="liquidForm.lPg.$error">
                            <div ng-message="pattern">Please enter a valid percentage value</div>
                        </div>
                    </md-input-container>

                    <md-input-container class="md-block">
                        <label>Author's rating (0-10)</label>
                        <input required name="lRating" ng-model="liquid.rating" ng-pattern="/^([1-9]|10)$/">

                        <div ng-messages="liquidForm.lRating.$error">
                            <div ng-message="pattern">Please enter a valid rating value (0-10)</div>
                        </div>

                    </md-input-container>
                </section>

                <section>
                    <div class="label">Base</div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Base manufacturer</label>
                            <input ng-model="liquid.base.manufacturer">
                        </md-input-container>

                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Base concentration [mg/ml]</label>
                            <input name="bConc" ng-model="liquid.base.concentration" ng-pattern="/^[0-9]{1,3}$/">
                            <div ng-messages="liquidForm.bConc.$error">
                                <div ng-message="pattern">Please enter a valid numeric value</div>
                            </div>
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Base PG [%]</label>
                            <input ng-model="liquid.base.pg_vg" name="bPg" ng-pattern="/^[0-9]{1,2}$/">
                            <div ng-messages="liquidForm.bPg.$error">
                                <div ng-message="pattern">Please enter a valid percentage value</div>
                            </div>
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Base amount [%]</label>
                            <input ng-model="liquid.base.amount" name="bAmount" ng-pattern="/^[0-9]{1,2}$/">
                            <div ng-messages="liquidForm.bAmount.$error">
                                <div ng-message="pattern">Please enter a valid percentage value</div>
                            </div>
                        </md-input-container>
                    </div>
                </section>

                <section>
                    <div class="label">Aromas</div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Aroma name</label>
                            <input ng-model="aroma.name">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Aroma concentration [%]</label>
                            <input ng-model="aroma.concentration" name="aPerc" ng-pattern="/^[0-9]{1,2}$/">
                            <div ng-messages="liquidForm.aPerc.$error">
                                <div ng-message="pattern">Please enter a valid percentage value</div>
                            </div>
                        </md-input-container>
                        <md-button class="md-primary md-raised form-button" ng-disabled="!aroma.name
                            || !aroma.concentration || liquidForm.aPerc.$invalid" ng-click="addAroma()">Add
                        </md-button>
                    </div>

                    <md-content ng-if="liquid.aromas">
                        <md-list flex>
                            <md-list-item class="md-2-line" ng-repeat="item in liquid.aromas" ng-click="null">
                                <div class="md-list-item-text" layout="column">
                                    <h3>{{ item.name }}</h3>
                                    <p>{{ item.concentration }} %</p>
                                    <!--<p>{{ item.notes }}</p>-->
                                </div>
                                <md-divider></md-divider>
                            </md-list-item>
                        </md-list>
                    </md-content>
                </section>

                <section>
                    <div class="label">Accessories</div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Name</label>
                            <input ng-model="acc.name">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Concentration [%]</label>
                            <input ng-model="acc.concentration" name="accPerc">
                            <div ng-messages="liquidForm.accPerc.$error">
                                <div ng-message="pattern">Please enter a valid percentage value</div>
                            </div>
                        </md-input-container>
                        <md-button class="md-primary md-raised form-button" ng-disabled="!acc.name
                            || !acc.concentration || liquidForm.accPerc.$invalid"
                                   ng-click="addAccessory()">Add
                        </md-button>
                    </div>

                    <md-content ng-if="liquid.accessories">
                        <md-list flex>
                            <md-list-item class="md-2-line" ng-repeat="item in liquid.accessories" ng-click="null">
                                <div class="md-list-item-text" layout="column">
                                    <h3>{{ item.name }}</h3>
                                    <p>{{ item.concentration }} %</p>
                                    <!--<p>{{ item.notes }}</p>-->
                                </div>
                            </md-list-item>
                        </md-list>
                    </md-content>
                </section>

                <section ng-if="commentsVisible">
                    <div class="label">Comments</div>

                    <md-content>
                        <md-list flex>
                            <md-list-item class="md-2-line" ng-repeat="item in liquid.comments" ng-click="null">
                                <div class="md-list-item-text" layout="column">
                                    <h3>{{ item.author }}</h3>
                                    <h4>{{ item.comment }}</h4>
                                    <p>{{ item.rating }}</p>
                                </div>
                                <md-divider></md-divider>
                            </md-list-item>
                        </md-list>
                    </md-content>

                    <div layout-gt-sm="column">
                        <md-input-container class="md-block">
                            <label>Author</label>
                            <input ng-model="comment.author">
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Comment</label>
                            <textarea ng-model="comment.comment" md-maxlength="1000" rows="5" md-select-on-focus>
                                </textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Rating</label>
                            <input ng-model="comment.rating">
                        </md-input-container>
                        <div layout="row">
                            <span flex></span>
                            <md-button class="md-primary md-raised form-button"
                                       ng-disabled="!comment.author || !comment.comment" ng-click="addComment()">Add
                                comment
                            </md-button>
                        </div>
                    </div>
                </section>

                <section>
                    <md-divider>
                    </md-divider>
                    <div layout="row">
                        <md-button class="md-warn" ng-click="showConfirm($event)">Cancel</md-button>
                        <span flex></span>
                        <md-button class="md-warn md-raised"
                                   ng-disabled="liquid.aromas.length == 0 || liquidForm.$invalid"
                                   ng-click="saveLiquid()">Save
                        </md-button>
                    </div>
                </section>
            </form>
        </div>
    </div>
</div>